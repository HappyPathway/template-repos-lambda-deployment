{
  "format_version": "1.2",
  "terraform_version": "1.9.1",
  "variables": {
    "aws_region": {
      "value": "us-east-1"
    },
    "tags": {
      "value": {}
    }
  },
  "planned_values": {
    "outputs": {
      "lambda_function_arn": {
        "sensitive": false
      },
      "lambda_function_name": {
        "sensitive": false,
        "type": "string",
        "value": "template-repos-template-automation"
      },
      "lambda_role_arn": {
        "sensitive": false
      }
    },
    "root_module": {
      "child_modules": [
        {
          "resources": [
            {
              "address": "module.template_automation.aws_apigatewayv2_api.this",
              "mode": "managed",
              "type": "aws_apigatewayv2_api",
              "name": "this",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "api_key_selection_expression": "$request.header.x-api-key",
                "body": null,
                "cors_configuration": [
                  {
                    "allow_credentials": null,
                    "allow_headers": [
                      "content-type"
                    ],
                    "allow_methods": [
                      "OPTIONS",
                      "POST"
                    ],
                    "allow_origins": [
                      "*"
                    ],
                    "expose_headers": null,
                    "max_age": null
                  }
                ],
                "credentials_arn": null,
                "description": "API Gateway for template automation Lambda function",
                "disable_execute_api_endpoint": null,
                "fail_on_warnings": null,
                "name": "template-repos-api",
                "protocol_type": "HTTP",
                "route_key": null,
                "route_selection_expression": "$request.method $request.path",
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "target": null,
                "version": null
              },
              "sensitive_values": {
                "cors_configuration": [
                  {
                    "allow_headers": [
                      false
                    ],
                    "allow_methods": [
                      false,
                      false
                    ],
                    "allow_origins": [
                      false
                    ]
                  }
                ],
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.template_automation.aws_apigatewayv2_integration.this",
              "mode": "managed",
              "type": "aws_apigatewayv2_integration",
              "name": "this",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "connection_id": null,
                "connection_type": "INTERNET",
                "content_handling_strategy": null,
                "credentials_arn": null,
                "description": null,
                "integration_method": null,
                "integration_subtype": null,
                "integration_type": "AWS_PROXY",
                "passthrough_behavior": null,
                "payload_format_version": "2.0",
                "request_parameters": null,
                "request_templates": null,
                "response_parameters": [],
                "template_selection_expression": null,
                "tls_config": []
              },
              "sensitive_values": {
                "response_parameters": [],
                "tls_config": []
              }
            },
            {
              "address": "module.template_automation.aws_apigatewayv2_route.this",
              "mode": "managed",
              "type": "aws_apigatewayv2_route",
              "name": "this",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "api_key_required": false,
                "authorization_scopes": null,
                "authorization_type": "NONE",
                "authorizer_id": null,
                "model_selection_expression": null,
                "operation_name": null,
                "request_models": null,
                "request_parameter": [],
                "route_key": "POST /template",
                "route_response_selection_expression": null
              },
              "sensitive_values": {
                "request_parameter": []
              }
            },
            {
              "address": "module.template_automation.aws_apigatewayv2_stage.this",
              "mode": "managed",
              "type": "aws_apigatewayv2_stage",
              "name": "this",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "access_log_settings": [],
                "auto_deploy": true,
                "client_certificate_id": null,
                "default_route_settings": [],
                "description": null,
                "name": "$default",
                "route_settings": [],
                "stage_variables": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                }
              },
              "sensitive_values": {
                "access_log_settings": [],
                "default_route_settings": [],
                "route_settings": [],
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.template_automation.aws_iam_role.lambda",
              "mode": "managed",
              "type": "aws_iam_role",
              "name": "lambda",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                "description": null,
                "force_detach_policies": false,
                "max_session_duration": 3600,
                "name": "template-repos-lambda-role",
                "path": "/",
                "permissions_boundary": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                }
              },
              "sensitive_values": {
                "inline_policy": [],
                "managed_policy_arns": [],
                "tags": {},
                "tags_all": {}
              }
            },
            {
              "address": "module.template_automation.aws_iam_role_policy.parameter_store",
              "mode": "managed",
              "type": "aws_iam_role_policy",
              "name": "parameter_store",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "template-repos-parameter-store-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParametersByPath\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-gov-east-1:229685449397:parameter/template-automation/*\"]}]}"
              },
              "sensitive_values": {}
            },
            {
              "address": "module.template_automation.aws_iam_role_policy.secrets_manager",
              "mode": "managed",
              "type": "aws_iam_role_policy",
              "name": "secrets_manager",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "name": "template-repos-secrets-manager-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:us-gov-east-1:229685449397:secret:github/template-automation-token-*\"]}]}"
              },
              "sensitive_values": {
                "policy": true
              }
            },
            {
              "address": "module.template_automation.aws_iam_role_policy_attachment.lambda_logs",
              "mode": "managed",
              "type": "aws_iam_role_policy_attachment",
              "name": "lambda_logs",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
                "role": "template-repos-lambda-role"
              },
              "sensitive_values": {}
            },
            {
              "address": "module.template_automation.aws_lambda_function.this",
              "mode": "managed",
              "type": "aws_lambda_function",
              "name": "this",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "code_signing_config_arn": null,
                "dead_letter_config": [],
                "description": null,
                "environment": [
                  {
                    "variables": {
                      "GITHUB_TOKEN_SECRET_NAME": "github/template-automation-token",
                      "LOG_LEVEL": "INFO",
                      "PARAM_STORE_PREFIX": "/template-automation"
                    }
                  }
                ],
                "file_system_config": [],
                "filename": null,
                "function_name": "template-repos-template-automation",
                "handler": null,
                "image_config": [],
                "image_uri": "229685449397.dkr.ecr.us-east-1.amazonaws.com/template-automation-lambda:latest",
                "kms_key_arn": null,
                "layers": null,
                "memory_size": 512,
                "package_type": "Image",
                "publish": true,
                "replace_security_groups_on_destroy": null,
                "replacement_security_group_ids": null,
                "reserved_concurrent_executions": -1,
                "runtime": null,
                "s3_bucket": null,
                "s3_key": null,
                "s3_object_version": null,
                "skip_destroy": false,
                "snap_start": [],
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "timeout": 300,
                "timeouts": null,
                "vpc_config": []
              },
              "sensitive_values": {
                "architectures": [],
                "dead_letter_config": [],
                "environment": [
                  {
                    "variables": {
                      "GITHUB_TOKEN_SECRET_NAME": true
                    }
                  }
                ],
                "ephemeral_storage": [],
                "file_system_config": [],
                "image_config": [],
                "logging_config": [],
                "snap_start": [],
                "tags": {},
                "tags_all": {},
                "tracing_config": [],
                "vpc_config": []
              }
            },
            {
              "address": "module.template_automation.aws_lambda_permission.apigw",
              "mode": "managed",
              "type": "aws_lambda_permission",
              "name": "apigw",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "action": "lambda:InvokeFunction",
                "event_source_token": null,
                "function_name": "template-repos-template-automation",
                "function_url_auth_type": null,
                "principal": "apigateway.amazonaws.com",
                "principal_org_id": null,
                "qualifier": null,
                "source_account": null,
                "statement_id": "AllowAPIGatewayInvoke"
              },
              "sensitive_values": {}
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_API\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "GITHUB_API",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/GITHUB_API",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "https://github.census.gov/api/v3",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_COMMIT_AUTHOR_EMAIL\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "GITHUB_COMMIT_AUTHOR_EMAIL",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/GITHUB_COMMIT_AUTHOR_EMAIL",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "automation@census.gov",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_COMMIT_AUTHOR_NAME\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "GITHUB_COMMIT_AUTHOR_NAME",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/GITHUB_COMMIT_AUTHOR_NAME",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "Template Automation Bot",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_ORG_NAME\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "GITHUB_ORG_NAME",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/GITHUB_ORG_NAME",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "sct-engineering",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"TEMPLATE_CONFIG_FILE\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "TEMPLATE_CONFIG_FILE",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/TEMPLATE_CONFIG_FILE",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "config.json",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"TEMPLATE_REPO_NAME\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "TEMPLATE_REPO_NAME",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/TEMPLATE_REPO_NAME",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "template-eks-cluster",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"TEMPLATE_TOPICS\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "TEMPLATE_TOPICS",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/TEMPLATE_TOPICS",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "infrastructure,eks,kubernetes",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"config_file\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "config_file",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/config_file",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "config.json",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"default_branch\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "default_branch",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/default_branch",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "main",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"github_org\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "github_org",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/github_org",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "sct-engineering",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"init_branch\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "init_branch",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/init_branch",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "init-cluster",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            },
            {
              "address": "module.template_automation.aws_ssm_parameter.parameters[\"template_repo\"]",
              "mode": "managed",
              "type": "aws_ssm_parameter",
              "name": "parameters",
              "index": "template_repo",
              "provider_name": "registry.terraform.io/hashicorp/aws",
              "schema_version": 0,
              "values": {
                "allowed_pattern": null,
                "description": null,
                "name": "/template-automation/template_repo",
                "overwrite": null,
                "tags": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "tags_all": {
                  "Environment": "production",
                  "ManagedBy": "terraform",
                  "Project": "template-automation"
                },
                "type": "String",
                "value": "template-eks-cluster",
                "value_wo": null,
                "value_wo_version": null
              },
              "sensitive_values": {
                "tags": {},
                "tags_all": {},
                "value": true,
                "value_wo": true
              }
            }
          ],
          "address": "module.template_automation"
        }
      ]
    }
  },
  "resource_changes": [
    {
      "address": "module.template_automation.aws_apigatewayv2_api.this",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_apigatewayv2_api",
      "name": "this",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "api_key_selection_expression": "$request.header.x-api-key",
          "body": null,
          "cors_configuration": [
            {
              "allow_credentials": null,
              "allow_headers": [
                "content-type"
              ],
              "allow_methods": [
                "OPTIONS",
                "POST"
              ],
              "allow_origins": [
                "*"
              ],
              "expose_headers": null,
              "max_age": null
            }
          ],
          "credentials_arn": null,
          "description": "API Gateway for template automation Lambda function",
          "disable_execute_api_endpoint": null,
          "fail_on_warnings": null,
          "name": "template-repos-api",
          "protocol_type": "HTTP",
          "route_key": null,
          "route_selection_expression": "$request.method $request.path",
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "target": null,
          "version": null
        },
        "after_unknown": {
          "api_endpoint": true,
          "arn": true,
          "cors_configuration": [
            {
              "allow_headers": [
                false
              ],
              "allow_methods": [
                false,
                false
              ],
              "allow_origins": [
                false
              ]
            }
          ],
          "execution_arn": true,
          "id": true,
          "ip_address_type": true,
          "tags": {},
          "tags_all": {}
        },
        "before_sensitive": false,
        "after_sensitive": {
          "cors_configuration": [
            {
              "allow_headers": [
                false
              ],
              "allow_methods": [
                false,
                false
              ],
              "allow_origins": [
                false
              ]
            }
          ],
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.template_automation.aws_apigatewayv2_integration.this",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "this",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "connection_id": null,
          "connection_type": "INTERNET",
          "content_handling_strategy": null,
          "credentials_arn": null,
          "description": null,
          "integration_method": null,
          "integration_subtype": null,
          "integration_type": "AWS_PROXY",
          "passthrough_behavior": null,
          "payload_format_version": "2.0",
          "request_parameters": null,
          "request_templates": null,
          "response_parameters": [],
          "template_selection_expression": null,
          "tls_config": []
        },
        "after_unknown": {
          "api_id": true,
          "id": true,
          "integration_response_selection_expression": true,
          "integration_uri": true,
          "response_parameters": [],
          "timeout_milliseconds": true,
          "tls_config": []
        },
        "before_sensitive": false,
        "after_sensitive": {
          "response_parameters": [],
          "tls_config": []
        }
      }
    },
    {
      "address": "module.template_automation.aws_apigatewayv2_route.this",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "this",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "api_key_required": false,
          "authorization_scopes": null,
          "authorization_type": "NONE",
          "authorizer_id": null,
          "model_selection_expression": null,
          "operation_name": null,
          "request_models": null,
          "request_parameter": [],
          "route_key": "POST /template",
          "route_response_selection_expression": null
        },
        "after_unknown": {
          "api_id": true,
          "id": true,
          "request_parameter": [],
          "target": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "request_parameter": []
        }
      }
    },
    {
      "address": "module.template_automation.aws_apigatewayv2_stage.this",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_apigatewayv2_stage",
      "name": "this",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "access_log_settings": [],
          "auto_deploy": true,
          "client_certificate_id": null,
          "default_route_settings": [],
          "description": null,
          "name": "$default",
          "route_settings": [],
          "stage_variables": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          }
        },
        "after_unknown": {
          "access_log_settings": [],
          "api_id": true,
          "arn": true,
          "default_route_settings": [],
          "deployment_id": true,
          "execution_arn": true,
          "id": true,
          "invoke_url": true,
          "route_settings": [],
          "tags": {},
          "tags_all": {}
        },
        "before_sensitive": false,
        "after_sensitive": {
          "access_log_settings": [],
          "default_route_settings": [],
          "route_settings": [],
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.template_automation.aws_iam_role.lambda",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
          "description": null,
          "force_detach_policies": false,
          "max_session_duration": 3600,
          "name": "template-repos-lambda-role",
          "path": "/",
          "permissions_boundary": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          }
        },
        "after_unknown": {
          "arn": true,
          "create_date": true,
          "id": true,
          "inline_policy": true,
          "managed_policy_arns": true,
          "name_prefix": true,
          "tags": {},
          "tags_all": {},
          "unique_id": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "inline_policy": [],
          "managed_policy_arns": [],
          "tags": {},
          "tags_all": {}
        }
      }
    },
    {
      "address": "module.template_automation.aws_iam_role_policy.parameter_store",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "parameter_store",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "name": "template-repos-parameter-store-policy",
          "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameter\",\"ssm:GetParameters\",\"ssm:GetParametersByPath\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:us-gov-east-1:229685449397:parameter/template-automation/*\"]}]}"
        },
        "after_unknown": {
          "id": true,
          "name_prefix": true,
          "role": true
        },
        "before_sensitive": false,
        "after_sensitive": {}
      }
    },
    {
      "address": "module.template_automation.aws_iam_role_policy.secrets_manager",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "secrets_manager",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "name": "template-repos-secrets-manager-policy",
          "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:us-gov-east-1:229685449397:secret:github/template-automation-token-*\"]}]}"
        },
        "after_unknown": {
          "id": true,
          "name_prefix": true,
          "role": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "policy": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_iam_role_policy_attachment.lambda_logs",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_logs",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          "role": "template-repos-lambda-role"
        },
        "after_unknown": {
          "id": true
        },
        "before_sensitive": false,
        "after_sensitive": {}
      }
    },
    {
      "address": "module.template_automation.aws_lambda_function.this",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "this",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "code_signing_config_arn": null,
          "dead_letter_config": [],
          "description": null,
          "environment": [
            {
              "variables": {
                "GITHUB_TOKEN_SECRET_NAME": "github/template-automation-token",
                "LOG_LEVEL": "INFO",
                "PARAM_STORE_PREFIX": "/template-automation"
              }
            }
          ],
          "file_system_config": [],
          "filename": null,
          "function_name": "template-repos-template-automation",
          "handler": null,
          "image_config": [],
          "image_uri": "229685449397.dkr.ecr.us-east-1.amazonaws.com/template-automation-lambda:latest",
          "kms_key_arn": null,
          "layers": null,
          "memory_size": 512,
          "package_type": "Image",
          "publish": true,
          "replace_security_groups_on_destroy": null,
          "replacement_security_group_ids": null,
          "reserved_concurrent_executions": -1,
          "runtime": null,
          "s3_bucket": null,
          "s3_key": null,
          "s3_object_version": null,
          "skip_destroy": false,
          "snap_start": [],
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "timeout": 300,
          "timeouts": null,
          "vpc_config": []
        },
        "after_unknown": {
          "architectures": true,
          "arn": true,
          "code_sha256": true,
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {}
            }
          ],
          "ephemeral_storage": true,
          "file_system_config": [],
          "id": true,
          "image_config": [],
          "invoke_arn": true,
          "last_modified": true,
          "logging_config": true,
          "qualified_arn": true,
          "qualified_invoke_arn": true,
          "role": true,
          "signing_job_arn": true,
          "signing_profile_version_arn": true,
          "snap_start": [],
          "source_code_hash": true,
          "source_code_size": true,
          "tags": {},
          "tags_all": {},
          "tracing_config": true,
          "version": true,
          "vpc_config": []
        },
        "before_sensitive": false,
        "after_sensitive": {
          "architectures": [],
          "dead_letter_config": [],
          "environment": [
            {
              "variables": {
                "GITHUB_TOKEN_SECRET_NAME": true
              }
            }
          ],
          "ephemeral_storage": [],
          "file_system_config": [],
          "image_config": [],
          "logging_config": [],
          "snap_start": [],
          "tags": {},
          "tags_all": {},
          "tracing_config": [],
          "vpc_config": []
        }
      }
    },
    {
      "address": "module.template_automation.aws_lambda_permission.apigw",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "apigw",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "action": "lambda:InvokeFunction",
          "event_source_token": null,
          "function_name": "template-repos-template-automation",
          "function_url_auth_type": null,
          "principal": "apigateway.amazonaws.com",
          "principal_org_id": null,
          "qualifier": null,
          "source_account": null,
          "statement_id": "AllowAPIGatewayInvoke"
        },
        "after_unknown": {
          "id": true,
          "source_arn": true,
          "statement_id_prefix": true
        },
        "before_sensitive": false,
        "after_sensitive": {}
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_API\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "GITHUB_API",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/GITHUB_API",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "https://github.census.gov/api/v3",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_COMMIT_AUTHOR_EMAIL\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "GITHUB_COMMIT_AUTHOR_EMAIL",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/GITHUB_COMMIT_AUTHOR_EMAIL",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "automation@census.gov",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_COMMIT_AUTHOR_NAME\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "GITHUB_COMMIT_AUTHOR_NAME",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/GITHUB_COMMIT_AUTHOR_NAME",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "Template Automation Bot",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"GITHUB_ORG_NAME\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "GITHUB_ORG_NAME",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/GITHUB_ORG_NAME",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "sct-engineering",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"TEMPLATE_CONFIG_FILE\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "TEMPLATE_CONFIG_FILE",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/TEMPLATE_CONFIG_FILE",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "config.json",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"TEMPLATE_REPO_NAME\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "TEMPLATE_REPO_NAME",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/TEMPLATE_REPO_NAME",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "template-eks-cluster",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"TEMPLATE_TOPICS\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "TEMPLATE_TOPICS",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/TEMPLATE_TOPICS",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "infrastructure,eks,kubernetes",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"config_file\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "config_file",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/config_file",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "config.json",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"default_branch\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "default_branch",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/default_branch",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "main",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"github_org\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "github_org",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/github_org",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "sct-engineering",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"init_branch\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "init_branch",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/init_branch",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "init-cluster",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    },
    {
      "address": "module.template_automation.aws_ssm_parameter.parameters[\"template_repo\"]",
      "module_address": "module.template_automation",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "parameters",
      "index": "template_repo",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": [
          "create"
        ],
        "before": null,
        "after": {
          "allowed_pattern": null,
          "description": null,
          "name": "/template-automation/template_repo",
          "overwrite": null,
          "tags": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "tags_all": {
            "Environment": "production",
            "ManagedBy": "terraform",
            "Project": "template-automation"
          },
          "type": "String",
          "value": "template-eks-cluster",
          "value_wo": null,
          "value_wo_version": null
        },
        "after_unknown": {
          "arn": true,
          "data_type": true,
          "has_value_wo": true,
          "id": true,
          "insecure_value": true,
          "key_id": true,
          "tags": {},
          "tags_all": {},
          "tier": true,
          "version": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "tags": {},
          "tags_all": {},
          "value": true,
          "value_wo": true
        }
      }
    }
  ],
  "output_changes": {
    "lambda_function_arn": {
      "actions": [
        "create"
      ],
      "before": null,
      "after_unknown": true,
      "before_sensitive": false,
      "after_sensitive": false
    },
    "lambda_function_name": {
      "actions": [
        "create"
      ],
      "before": null,
      "after": "template-repos-template-automation",
      "after_unknown": false,
      "before_sensitive": false,
      "after_sensitive": false
    },
    "lambda_role_arn": {
      "actions": [
        "create"
      ],
      "before": null,
      "after_unknown": true,
      "before_sensitive": false,
      "after_sensitive": false
    }
  },
  "prior_state": {
    "format_version": "1.0",
    "terraform_version": "1.9.1",
    "values": {
      "outputs": {
        "lambda_function_name": {
          "sensitive": false,
          "value": "template-repos-template-automation",
          "type": "string"
        }
      },
      "root_module": {
        "resources": [
          {
            "address": "data.aws_caller_identity.current",
            "mode": "data",
            "type": "aws_caller_identity",
            "name": "current",
            "provider_name": "registry.terraform.io/hashicorp/aws",
            "schema_version": 0,
            "values": {
              "account_id": "229685449397",
              "arn": "arn:aws-us-gov:sts::229685449397:assumed-role/AWSReservedSSO_inf-admin-t2_4e0c6446aecbe4a0/david.j.arnold.jr@census.gov",
              "id": "229685449397",
              "user_id": "AROATK6SR2K22ZVVMKHBO:david.j.arnold.jr@census.gov"
            },
            "sensitive_values": {}
          }
        ],
        "child_modules": [
          {
            "resources": [
              {
                "address": "module.template_automation.data.aws_caller_identity.current",
                "mode": "data",
                "type": "aws_caller_identity",
                "name": "current",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "account_id": "229685449397",
                  "arn": "arn:aws-us-gov:sts::229685449397:assumed-role/AWSReservedSSO_inf-admin-t2_4e0c6446aecbe4a0/david.j.arnold.jr@census.gov",
                  "id": "229685449397",
                  "user_id": "AROATK6SR2K22ZVVMKHBO:david.j.arnold.jr@census.gov"
                },
                "sensitive_values": {}
              },
              {
                "address": "module.template_automation.data.aws_region.current",
                "mode": "data",
                "type": "aws_region",
                "name": "current",
                "provider_name": "registry.terraform.io/hashicorp/aws",
                "schema_version": 0,
                "values": {
                  "description": "AWS GovCloud (US-East)",
                  "endpoint": "ec2.us-gov-east-1.amazonaws.com",
                  "id": "us-gov-east-1",
                  "name": "us-gov-east-1"
                },
                "sensitive_values": {}
              }
            ],
            "address": "module.template_automation"
          }
        ]
      }
    }
  },
  "configuration": {
    "provider_config": {
      "aws": {
        "name": "aws",
        "full_name": "registry.terraform.io/hashicorp/aws",
        "expressions": {
          "region": {
            "constant_value": "us-gov-east-1"
          }
        }
      }
    },
    "root_module": {
      "outputs": {
        "lambda_function_arn": {
          "expression": {
            "references": [
              "module.template_automation.lambda_function_arn",
              "module.template_automation"
            ]
          },
          "description": "ARN of the template automation Lambda function"
        },
        "lambda_function_name": {
          "expression": {
            "references": [
              "module.template_automation.lambda_function_name",
              "module.template_automation"
            ]
          },
          "description": "Name of the template automation Lambda function"
        },
        "lambda_role_arn": {
          "expression": {
            "references": [
              "module.template_automation.lambda_role_arn",
              "module.template_automation"
            ]
          },
          "description": "ARN of the Lambda IAM role"
        }
      },
      "resources": [
        {
          "address": "data.aws_caller_identity.current",
          "mode": "data",
          "type": "aws_caller_identity",
          "name": "current",
          "provider_config_key": "aws",
          "schema_version": 0
        }
      ],
      "module_calls": {
        "template_automation": {
          "source": "../terraform-aws-template-automation",
          "expressions": {
            "github_api_url": {
              "constant_value": "https://github.census.gov/api/v3"
            },
            "github_commit_author_email": {
              "constant_value": "automation@census.gov"
            },
            "github_commit_author_name": {
              "constant_value": "Template Automation Bot"
            },
            "github_org_name": {
              "constant_value": "sct-engineering"
            },
            "github_token": {
              "constant_value": {
                "secret_name": "github/template-automation-token"
              }
            },
            "lambda_config": {
              "references": [
                "data.aws_caller_identity.current.account_id",
                "data.aws_caller_identity.current"
              ]
            },
            "name_prefix": {
              "constant_value": "template-repos"
            },
            "parameter_store_prefix": {
              "constant_value": "/template-automation"
            },
            "ssm_parameters": {
              "constant_value": {
                "config_file": "config.json",
                "default_branch": "main",
                "github_org": "sct-engineering",
                "init_branch": "init-cluster",
                "template_repo": "template-eks-cluster"
              }
            },
            "tags": {
              "constant_value": {
                "Environment": "production",
                "ManagedBy": "terraform",
                "Project": "template-automation"
              }
            },
            "template_repo_name": {
              "constant_value": "template-eks-cluster"
            },
            "template_topics": {
              "constant_value": "infrastructure,eks,kubernetes"
            }
          },
          "module": {
            "outputs": {
              "api_endpoint": {
                "expression": {
                  "references": [
                    "aws_apigatewayv2_api.this.api_endpoint",
                    "aws_apigatewayv2_api.this"
                  ]
                },
                "description": "The URL of the API Gateway endpoint"
              },
              "api_execution_arn": {
                "expression": {
                  "references": [
                    "aws_apigatewayv2_api.this.execution_arn",
                    "aws_apigatewayv2_api.this"
                  ]
                },
                "description": "The execution ARN to be used in IAM policies"
              },
              "api_id": {
                "expression": {
                  "references": [
                    "aws_apigatewayv2_api.this.id",
                    "aws_apigatewayv2_api.this"
                  ]
                },
                "description": "The ID of the API Gateway"
              },
              "lambda_function_arn": {
                "expression": {
                  "references": [
                    "aws_lambda_function.this.arn",
                    "aws_lambda_function.this"
                  ]
                },
                "description": "The ARN of the Lambda function"
              },
              "lambda_function_name": {
                "expression": {
                  "references": [
                    "aws_lambda_function.this.function_name",
                    "aws_lambda_function.this"
                  ]
                },
                "description": "The name of the Lambda function"
              },
              "lambda_role_arn": {
                "expression": {
                  "references": [
                    "aws_iam_role.lambda.arn",
                    "aws_iam_role.lambda"
                  ]
                },
                "description": "The ARN of the IAM role used by the Lambda function"
              }
            },
            "resources": [
              {
                "address": "aws_apigatewayv2_api.this",
                "mode": "managed",
                "type": "aws_apigatewayv2_api",
                "name": "this",
                "provider_config_key": "aws",
                "expressions": {
                  "cors_configuration": [
                    {
                      "allow_headers": {
                        "constant_value": [
                          "content-type"
                        ]
                      },
                      "allow_methods": {
                        "constant_value": [
                          "POST",
                          "OPTIONS"
                        ]
                      },
                      "allow_origins": {
                        "constant_value": [
                          "*"
                        ]
                      }
                    }
                  ],
                  "description": {
                    "constant_value": "API Gateway for template automation Lambda function"
                  },
                  "name": {
                    "references": [
                      "var.name_prefix"
                    ]
                  },
                  "protocol_type": {
                    "constant_value": "HTTP"
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_apigatewayv2_integration.this",
                "mode": "managed",
                "type": "aws_apigatewayv2_integration",
                "name": "this",
                "provider_config_key": "aws",
                "expressions": {
                  "api_id": {
                    "references": [
                      "aws_apigatewayv2_api.this.id",
                      "aws_apigatewayv2_api.this"
                    ]
                  },
                  "integration_type": {
                    "constant_value": "AWS_PROXY"
                  },
                  "integration_uri": {
                    "references": [
                      "aws_lambda_function.this.invoke_arn",
                      "aws_lambda_function.this"
                    ]
                  },
                  "payload_format_version": {
                    "constant_value": "2.0"
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_apigatewayv2_route.this",
                "mode": "managed",
                "type": "aws_apigatewayv2_route",
                "name": "this",
                "provider_config_key": "aws",
                "expressions": {
                  "api_id": {
                    "references": [
                      "aws_apigatewayv2_api.this.id",
                      "aws_apigatewayv2_api.this"
                    ]
                  },
                  "route_key": {
                    "constant_value": "POST /template"
                  },
                  "target": {
                    "references": [
                      "aws_apigatewayv2_integration.this.id",
                      "aws_apigatewayv2_integration.this"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_apigatewayv2_stage.this",
                "mode": "managed",
                "type": "aws_apigatewayv2_stage",
                "name": "this",
                "provider_config_key": "aws",
                "expressions": {
                  "api_id": {
                    "references": [
                      "aws_apigatewayv2_api.this.id",
                      "aws_apigatewayv2_api.this"
                    ]
                  },
                  "auto_deploy": {
                    "constant_value": true
                  },
                  "name": {
                    "constant_value": "$default"
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_iam_role.lambda",
                "mode": "managed",
                "type": "aws_iam_role",
                "name": "lambda",
                "provider_config_key": "aws",
                "expressions": {
                  "assume_role_policy": {},
                  "name": {
                    "references": [
                      "var.name_prefix"
                    ]
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_iam_role_policy.parameter_store",
                "mode": "managed",
                "type": "aws_iam_role_policy",
                "name": "parameter_store",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "var.name_prefix"
                    ]
                  },
                  "policy": {
                    "references": [
                      "data.aws_region.current.name",
                      "data.aws_region.current",
                      "data.aws_caller_identity.current.account_id",
                      "data.aws_caller_identity.current",
                      "var.parameter_store_prefix"
                    ]
                  },
                  "role": {
                    "references": [
                      "aws_iam_role.lambda.id",
                      "aws_iam_role.lambda"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_iam_role_policy.secrets_manager",
                "mode": "managed",
                "type": "aws_iam_role_policy",
                "name": "secrets_manager",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "var.name_prefix"
                    ]
                  },
                  "policy": {
                    "references": [
                      "data.aws_region.current.name",
                      "data.aws_region.current",
                      "data.aws_caller_identity.current.account_id",
                      "data.aws_caller_identity.current",
                      "var.github_token.secret_name",
                      "var.github_token"
                    ]
                  },
                  "role": {
                    "references": [
                      "aws_iam_role.lambda.id",
                      "aws_iam_role.lambda"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_iam_role_policy_attachment.lambda_logs",
                "mode": "managed",
                "type": "aws_iam_role_policy_attachment",
                "name": "lambda_logs",
                "provider_config_key": "aws",
                "expressions": {
                  "policy_arn": {
                    "constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  },
                  "role": {
                    "references": [
                      "aws_iam_role.lambda.name",
                      "aws_iam_role.lambda"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_lambda_function.this",
                "mode": "managed",
                "type": "aws_lambda_function",
                "name": "this",
                "provider_config_key": "aws",
                "expressions": {
                  "environment": [
                    {
                      "variables": {
                        "references": [
                          "var.lambda_config.environment_variables",
                          "var.lambda_config",
                          "var.parameter_store_prefix",
                          "var.github_token.secret_name",
                          "var.github_token"
                        ]
                      }
                    }
                  ],
                  "function_name": {
                    "references": [
                      "local.lambda_function_name"
                    ]
                  },
                  "image_uri": {
                    "references": [
                      "var.lambda_config.image_uri",
                      "var.lambda_config"
                    ]
                  },
                  "memory_size": {
                    "references": [
                      "var.lambda_config.memory_size",
                      "var.lambda_config"
                    ]
                  },
                  "package_type": {
                    "constant_value": "Image"
                  },
                  "publish": {
                    "constant_value": true
                  },
                  "role": {
                    "references": [
                      "aws_iam_role.lambda.arn",
                      "aws_iam_role.lambda"
                    ]
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  },
                  "timeout": {
                    "references": [
                      "var.lambda_config.timeout",
                      "var.lambda_config"
                    ]
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_lambda_permission.apigw",
                "mode": "managed",
                "type": "aws_lambda_permission",
                "name": "apigw",
                "provider_config_key": "aws",
                "expressions": {
                  "action": {
                    "constant_value": "lambda:InvokeFunction"
                  },
                  "function_name": {
                    "references": [
                      "aws_lambda_function.this.function_name",
                      "aws_lambda_function.this"
                    ]
                  },
                  "principal": {
                    "constant_value": "apigateway.amazonaws.com"
                  },
                  "source_arn": {
                    "references": [
                      "aws_apigatewayv2_api.this.execution_arn",
                      "aws_apigatewayv2_api.this"
                    ]
                  },
                  "statement_id": {
                    "constant_value": "AllowAPIGatewayInvoke"
                  }
                },
                "schema_version": 0
              },
              {
                "address": "aws_secretsmanager_secret.github_token",
                "mode": "managed",
                "type": "aws_secretsmanager_secret",
                "name": "github_token",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "var.github_token.secret_name",
                      "var.github_token"
                    ]
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  }
                },
                "schema_version": 0,
                "count_expression": {
                  "references": [
                    "var.github_token.token",
                    "var.github_token"
                  ]
                }
              },
              {
                "address": "aws_secretsmanager_secret_version.github_token",
                "mode": "managed",
                "type": "aws_secretsmanager_secret_version",
                "name": "github_token",
                "provider_config_key": "aws",
                "expressions": {
                  "secret_id": {
                    "references": [
                      "aws_secretsmanager_secret.github_token[0].id",
                      "aws_secretsmanager_secret.github_token[0]",
                      "aws_secretsmanager_secret.github_token"
                    ]
                  },
                  "secret_string": {
                    "references": [
                      "var.github_token.token",
                      "var.github_token"
                    ]
                  }
                },
                "schema_version": 0,
                "count_expression": {
                  "references": [
                    "var.github_token.token",
                    "var.github_token"
                  ]
                }
              },
              {
                "address": "aws_ssm_parameter.parameters",
                "mode": "managed",
                "type": "aws_ssm_parameter",
                "name": "parameters",
                "provider_config_key": "aws",
                "expressions": {
                  "name": {
                    "references": [
                      "var.parameter_store_prefix",
                      "each.key"
                    ]
                  },
                  "tags": {
                    "references": [
                      "var.tags"
                    ]
                  },
                  "type": {
                    "constant_value": "String"
                  },
                  "value": {
                    "references": [
                      "each.value"
                    ]
                  }
                },
                "schema_version": 0,
                "for_each_expression": {
                  "references": [
                    "var.ssm_parameters",
                    "var.github_api_url",
                    "var.github_org_name",
                    "var.template_repo_name",
                    "var.template_config_file",
                    "var.github_commit_author_name",
                    "var.github_commit_author_email",
                    "var.template_topics"
                  ]
                }
              },
              {
                "address": "data.aws_caller_identity.current",
                "mode": "data",
                "type": "aws_caller_identity",
                "name": "current",
                "provider_config_key": "aws",
                "schema_version": 0
              },
              {
                "address": "data.aws_region.current",
                "mode": "data",
                "type": "aws_region",
                "name": "current",
                "provider_config_key": "aws",
                "schema_version": 0
              }
            ],
            "variables": {
              "allowed_iam_arns": {
                "default": [],
                "description": "List of IAM ARNs allowed to invoke the Lambda function when IAM auth is enabled"
              },
              "github_api_url": {
                "default": "https://api.github.com",
                "description": "URL for the GitHub Enterprise API"
              },
              "github_commit_author_email": {
                "default": "automation@example.com",
                "description": "Email for commit author"
              },
              "github_commit_author_name": {
                "default": "Template Automation",
                "description": "Name for commit author"
              },
              "github_org_name": {
                "description": "GitHub organization name"
              },
              "github_token": {
                "description": "GitHub token configuration",
                "sensitive": true
              },
              "lambda_config": {
                "description": "Lambda function configuration object"
              },
              "name_prefix": {
                "description": "Prefix to be used for resource names"
              },
              "parameter_store_prefix": {
                "default": "/template-automation",
                "description": "Prefix for SSM parameters (e.g., /template-automation)"
              },
              "ssm_parameters": {
                "default": {},
                "description": "Map of SSM parameters to create for the Lambda function"
              },
              "tags": {
                "default": {},
                "description": "Tags to be applied to all resources"
              },
              "template_config_file": {
                "default": "config.json",
                "description": "Name of the config file to write in new repositories"
              },
              "template_repo_name": {
                "description": "GitHub repository name for the template"
              },
              "template_topics": {
                "default": "infrastructure",
                "description": "Topics to assign to new repositories (comma-separated string)"
              }
            }
          }
        }
      },
      "variables": {
        "aws_region": {
          "default": "us-east-1",
          "description": "AWS Region"
        },
        "tags": {
          "default": {},
          "description": "Additional tags (e.g. map(`BusinessUnit`,`XYZ`))"
        }
      }
    }
  },
  "relevant_attributes": [
    {
      "resource": "module.template_automation.aws_apigatewayv2_api.this",
      "attribute": [
        "api_endpoint"
      ]
    },
    {
      "resource": "module.template_automation.aws_lambda_function.this",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.template_automation.aws_apigatewayv2_api.this",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "module.template_automation.aws_iam_role.lambda",
      "attribute": [
        "arn"
      ]
    },
    {
      "resource": "module.template_automation.aws_apigatewayv2_api.this",
      "attribute": [
        "execution_arn"
      ]
    },
    {
      "resource": "module.template_automation.data.aws_caller_identity.current",
      "attribute": [
        "account_id"
      ]
    },
    {
      "resource": "module.template_automation.aws_lambda_function.this",
      "attribute": [
        "invoke_arn"
      ]
    },
    {
      "resource": "module.template_automation.aws_apigatewayv2_integration.this",
      "attribute": [
        "id"
      ]
    },
    {
      "resource": "data.aws_caller_identity.current",
      "attribute": [
        "account_id"
      ]
    },
    {
      "resource": "module.template_automation.aws_iam_role.lambda",
      "attribute": [
        "name"
      ]
    },
    {
      "resource": "module.template_automation.aws_lambda_function.this",
      "attribute": [
        "function_name"
      ]
    },
    {
      "resource": "module.template_automation.data.aws_region.current",
      "attribute": [
        "name"
      ]
    },
    {
      "resource": "module.template_automation.aws_iam_role.lambda",
      "attribute": [
        "id"
      ]
    }
  ],
  "checks": [
    {
      "address": {
        "kind": "var",
        "module": "module.template_automation",
        "name": "lambda_config",
        "to_display": "module.template_automation.var.lambda_config"
      },
      "status": "pass",
      "instances": [
        {
          "address": {
            "module": "module.template_automation",
            "to_display": "module.template_automation.var.lambda_config"
          },
          "status": "pass"
        }
      ]
    }
  ],
  "timestamp": "2025-05-02T19:15:32Z",
  "applyable": true,
  "complete": true,
  "errored": false
}
